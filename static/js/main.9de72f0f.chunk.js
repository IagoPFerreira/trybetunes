(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(e,t,a){},31:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(22),i=a.n(s),c=(a(30),a(3)),o=a(4),u=a(6),l=a(5),d=a(2),m=a(11),j=a(18),b="user",h=function(e){return localStorage.setItem(b,JSON.stringify(e))},p=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},f=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(b));null===t&&(t={}),p(t)(e)}))},O=(a(31),a(0)),g=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(O.jsx)("section",{className:"spinner"})}}]),a}(n.Component),v=g,x=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).renderHeader=function(){var t=e.state.user;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{"data-testid":"header-user-name",className:"user-name",children:t.name}),Object(O.jsxs)("nav",{className:"navbar",children:[Object(O.jsx)(m.b,{to:"/search","data-testid":"link-to-search",className:"nav-link",children:"Search"}),Object(O.jsx)(m.b,{to:"/favorites","data-testid":"link-to-favorites",className:"nav-link",children:"Favorites"}),Object(O.jsx)(m.b,{to:"/profile","data-testid":"link-to-profile",className:"nav-link",children:"Profile"})]})]})},e.state={isLoading:!0,user:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;f().then((function(t){e.setState({isLoading:!1,user:t})}))}},{key:"render",value:function(){var e=this.state.isLoading;return Object(O.jsx)("header",{"data-testid":"header-component",className:"header-component",children:e?Object(O.jsx)(v,{}):this.renderHeader()})}}]),a}(n.Component),N=a(14),k=a.n(N),y=a(17),S=function(){var e=Object(y.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r.results);case 10:e.prev=10,e.t0=e.catch(0),a.history.push("/not-found");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),C=S,L=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.src,a=e.alt,n=e.artistName,r=e.collectionName,s=e.nameId,i=e.albumId,c=e.className;return Object(O.jsxs)("section",{className:c,children:[Object(O.jsx)("img",{src:t,alt:a,className:"card-img"}),Object(O.jsx)("h3",{"data-testid":s,className:"card-title",children:n}),Object(O.jsx)("h4",{"data-testid":i,className:"card-text",children:r})]})}}]),a}(n.Component),I=L,w=a(12),F=a(25),D="favorite_songs";JSON.parse(localStorage.getItem(D))||localStorage.setItem(D,JSON.stringify([]));var A=function(){return JSON.parse(localStorage.getItem(D))},P=function(e){return localStorage.setItem(D,JSON.stringify(e))},U=function(e){return function(t){setTimeout((function(){t(e)}),500)}},M=function(e){return new Promise((function(t){if(e){var a=A();P([].concat(Object(F.a)(a),[e]))}U("OK")(t)}))},E=function(e){return new Promise((function(t){var a=A();P(a.filter((function(t){return t.trackId!==e.trackId}))),U("OK")(t)}))},J=a.p+"static/media/whiteHeartIcon.2b822118.svg",K=a.p+"static/media/redHeart.dfe2b86b.png",T=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).checkLocalStorage=function(){var t=JSON.parse(localStorage.getItem("favorite_songs")),a=e.props.music.trackName,n=t.some((function(e){return e.trackName===a}));e.setState({checked:n})},e.handleSong=function(t,a){var n=t.target;e.setState({isLoading:!0,checked:n.checked});var r=Object(w.a)(e).props,s=r.music,i=r.onChange;i&&i(),a(s).then((function(){return e.setState({isLoading:!1})}))},e.renderTrack=function(){var t=Object(w.a)(e),a=t.props.music,n=a.trackName,r=a.previewUrl,s=a.trackId,i=t.state.checked;return Object(O.jsxs)("section",{className:"song-card",children:[Object(O.jsx)("span",{children:n}),Object(O.jsxs)("audio",{"data-testid":"audio-component",src:r,controls:!0,children:[Object(O.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(O.jsx)("code",{children:"audio"}),"."]}),Object(O.jsxs)("label",{"data-testid":"checkbox-music-".concat(s),htmlFor:n,children:[Object(O.jsx)("img",{src:i?K:J,alt:"set favorite",className:"heart-icon"}),Object(O.jsx)("input",{type:"checkbox",id:n,onChange:function(t){return i?e.handleSong(t,E):e.handleSong(t,M)},checked:i,hidden:!0})]})]})},e.state={isLoading:!1,checked:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.checkLocalStorage()}},{key:"render",value:function(){return this.state.isLoading?Object(O.jsx)(v,{}):this.renderTrack()}}]),a}(n.Component),R=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).renderAlbumCard=function(){var t=e.state.musics;if(t){var a=t[0],n=a.artistName,r=a.collectionName,s=a.artworkUrl100;return Object(O.jsx)(I,{src:s,alt:r,artistName:n,collectionName:r,nameId:"artist-name",albumId:"album-name",className:"album-card"})}},e.renderMusics=function(){var t=e.state.musics;if(t)return t.map((function(e,t){var a=e.trackName;return 0!==t&&Object(O.jsx)(T,{music:e},a)}))},e.state={musics:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;C(t,this.props).then((function(t){return e.setState({musics:t})}))}},{key:"render",value:function(){return Object(O.jsxs)("main",{"data-testid":"page-album",className:"page-album page",children:[Object(O.jsx)(x,{}),this.renderAlbumCard(),Object(O.jsx)("section",{className:"songs-container",children:this.renderMusics()})]})}}]),a}(n.Component),B=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).updateFavoritesSongs=function(){var t=e.state.isLoading;new Promise((function(e){var t=A();U(t)(e)})).then((function(a){t&&e.setState((function(){return{musics:a,isLoading:!1}}))}))},e.handleChange=function(){e.setState({isLoading:!0})},e.renderMusics=function(){var t=e.state.musics;if(t)return t.map((function(t){return Object(O.jsx)(T,{music:t,onChange:e.handleChange},t.trackName)}))},e.state={isLoading:!0,musics:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.updateFavoritesSongs()}},{key:"componentDidUpdate",value:function(){this.updateFavoritesSongs()}},{key:"render",value:function(){var e=this.state.musics;return Object(O.jsxs)("section",{"data-testid":"page-favorites",className:"page-favorites page",children:[Object(O.jsx)(x,{}),Object(O.jsx)("section",{className:"songs-container",children:e?this.renderMusics():Object(O.jsx)(v,{})})]})}}]),a}(n.Component),H=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.disabled,a=e.onClick,n=e.testId,r=e.text;return Object(O.jsx)("button",{type:"button",disabled:t,"data-testid":n,onClick:a,className:"button",children:r})}}]),a}(n.Component),q=H,_=function(e,t){13===e.keyCode&&t()},z=a.p+"static/media/music.5f1ce074.png",G=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).checkNameLength=function(t){var a=t.target.value;a.length>=3&&e.setState({disabled:!1,userName:a})},e.handleClick=function(){e.setState({isLoading:!0});var t,a=e.state.userName;(t={name:a},new Promise((function(e){h(Object(j.a)(Object(j.a)({},{name:"",email:"",image:"",description:""}),t)),p("OK")(e)}))).then((function(){e.setState({isLoading:!1,isRedirect:!0})}))},e.renderForm=function(){var t=e.state.disabled;return Object(O.jsxs)("section",{"data-testid":"page-login",className:"login-area",children:[Object(O.jsx)("img",{src:z,alt:"Nota musical colorida dentro de um c\xedrculo branco",className:"logo"}),Object(O.jsx)("input",{"data-testid":"login-name-input",onChange:e.checkNameLength,onKeyDown:function(t){return _(t,e.handleClick)},className:"email-input",id:"email-input",placeholder:"exemplo@exemplo.com"}),Object(O.jsx)(q,{disabled:t,onClick:e.handleClick,testId:"login-submit-button",text:"Entrar"})]})},e.state={isLoading:!1,disabled:!0,userName:"",isRedirect:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isRedirect;return t?Object(O.jsx)(v,{}):a?Object(O.jsx)(d.a,{to:"/search"}):this.renderForm()}}]),a}(n.Component),Q=a.p+"static/media/not-found.de28d47e.png",V=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.history;return setTimeout((function(){e.push("/search")}),4e3),Object(O.jsxs)("div",{"data-testid":"page-not-found",className:"not-found-page",children:[Object(O.jsx)("img",{src:Q,alt:"404, not found"}),Object(O.jsx)("p",{children:"Esta p\xe1gina ser\xe1 redirecionada para a p\xe1gina de pesquisa"})]})}}]),a}(n.Component),W=V,X=a.p+"static/media/blankProfilePicture.c3f94521.jpg",Y=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).renderUser=function(){var t=e.state.user,a=t.description,n=t.email,r=t.image,s=t.name;return Object(O.jsxs)("section",{className:"user-infos",children:[Object(O.jsx)("img",{src:r||X,alt:s,"data-testid":"profile-image",className:"user-image"}),Object(O.jsx)(m.b,{to:"profile/edit",children:"Editar perfil"}),Object(O.jsx)("h2",{children:s}),Object(O.jsx)("h3",{children:n}),Object(O.jsx)("p",{children:a})]})},e.state={isLoading:!0,user:null},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;f().then((function(t){e.setState({isLoading:!1,user:t})}))}},{key:"render",value:function(){var e=this.state.isLoading;return Object(O.jsxs)("section",{"data-testid":"page-profile",className:"page-profile page",children:[Object(O.jsx)(x,{}),e?Object(O.jsx)(v,{}):this.renderUser()]})}}]),a}(n.Component),Z=a(16),$=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).ableButton=function(){var t=e.state,a=t.description,n=t.email,r=t.image,s=t.name;a&&/\S+@\S+\.\S+/.test(n)&&r&&s&&e.setState({disabled:!1})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(Z.a)({},n,r)),e.ableButton()},e.handleClick=function(t){t.preventDefault();var a,n=e.props.history,r=e.state,s=r.description,i=r.email,c=r.image,o=r.name;a={description:s,email:i,image:c,name:o},new Promise((function(e){h(Object(j.a)({},a)),p("OK")(e)})),n.push("/profile")},e.renderForm=function(){var t=e.state,a=t.description,n=t.email,r=t.image,s=t.name,i=t.disabled;return Object(O.jsxs)("form",{className:"user-form",children:[Object(O.jsx)("img",{src:r||X,alt:s,className:"user-image"}),Object(O.jsxs)("fieldset",{className:"labels-container",children:[Object(O.jsxs)("label",{htmlFor:"user-image",children:["Imagem",Object(O.jsx)("input",{id:"user-image",type:"text",name:"image","data-testid":"edit-input-image",onChange:e.handleChange,value:r,placeholder:"Url para sua foto de perfil",className:"form-field"})]}),Object(O.jsxs)("label",{htmlFor:"user-name",children:["Nome",Object(O.jsx)("input",{id:"user-name",name:"name","data-testid":"edit-input-name",onChange:e.handleChange,value:s,placeholder:"Exemplo Exemplo",className:"form-field"})]}),Object(O.jsxs)("label",{htmlFor:"user-email",children:["Email",Object(O.jsx)("input",{id:"user-email",name:"email","data-testid":"edit-input-email",onChange:e.handleChange,value:n,placeholder:"exemplo@exemplo.com",className:"form-field"})]}),Object(O.jsxs)("label",{htmlFor:"user-description",children:["Descri\xe7\xe3o",Object(O.jsx)("textarea",{id:"user-description",name:"description","data-testid":"edit-input-description",onChange:e.handleChange,value:a,placeholder:"Exemplo Exemplo",className:"form-field"})]})]}),Object(O.jsx)(q,{disabled:i,onClick:e.handleClick,testId:"edit-button-save",text:"Salvar"})]})},e.state={isLoading:!0,description:"",email:"",image:"",name:"",disabled:!0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;f().then((function(t){var a=t.description,n=t.email,r=t.image,s=t.name,i=/\S+@\S+\.\S+/.test(s);e.setState({isLoading:!1,description:a,email:i?s:n,image:r,name:i?"":s})}))}},{key:"componentDidUpdate",value:function(){this.state.disabled&&this.ableButton()}},{key:"render",value:function(){var e=this.state.isLoading;return Object(O.jsxs)("section",{"data-testid":"page-profile-edit",className:"page-profile-edit page",children:[Object(O.jsx)(x,{}),e?Object(O.jsx)(v,{}):this.renderForm()]})}}]),a}(n.Component),ee=function(){var e=Object(y.a)(k.a.mark((function e(t){var a,n,r,s,i,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return s=e.sent,i=s.results,c=i.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=ee,ae=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).checkNameLength=function(t){var a=t.target.value,n=a.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ");e.setState({artistName:n}),a.length>=2&&(e.setState({disabled:!1}),e.name=n)},e.handleSearch=function(){var t=e.state.artistName;e.setState({isLoading:!0}),te(t).then((function(t){e.setState({isLoading:!1,artistAlbuns:t,artistName:""})}))},e.renderAlbuns=function(){var t=e.state.artistAlbuns;return Object(O.jsx)("section",{className:"albuns-group",children:t.map((function(e){var t=e.collectionId,a=e.artistName,n=e.collectionName,r=e.artworkUrl100;return Object(O.jsx)(m.b,{to:"/album/".concat(t),"data-testid":"link-to-album-".concat(t),className:"album-link",children:Object(O.jsx)(I,{src:r,alt:n,artistName:a,collectionName:n,nameId:"",albumId:"",className:"mini-card"})},t)}))})},e.checkAlbuns=function(){var t=Object(w.a)(e),a=t.name,n=t.state.artistAlbuns;if(n)return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Resultado de \xe1lbuns de: ".concat(a)}),n.length>0?e.renderAlbuns():Object(O.jsx)("h3",{children:"Nenhum \xe1lbum foi encontrado"})]})},e.state={isLoading:!1,disabled:!0,artistName:"",artistAlbuns:null},e.name="",e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.disabled,r=t.artistName;return Object(O.jsxs)("section",{"data-testid":"page-search",className:"search-area",children:[Object(O.jsx)(x,{}),Object(O.jsx)("input",{value:r,type:"text","data-testid":"search-artist-input",onChange:this.checkNameLength,onKeyDown:function(t){return _(t,e.handleSearch)},className:"search-input",placeholder:"Nome da banda/artista"}),Object(O.jsx)(q,{disabled:n,onClick:this.handleSearch,testId:"search-artist-button",text:"Pesquisar"}),a?Object(O.jsx)(v,{}):this.checkAlbuns()]})}}]),a}(n.Component),ne=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{exact:!0,path:"/trybetunes/",component:G}),Object(O.jsx)(d.b,{path:"/trybetunes/search",component:ae}),Object(O.jsx)(d.b,{path:"/trybetunes/album/:id",component:R}),Object(O.jsx)(d.b,{path:"/trybetunes/favorites",component:B}),Object(O.jsx)(d.b,{path:"/trybetunes/profile/edit",component:$}),Object(O.jsx)(d.b,{path:"/trybetunes/profile",component:Y}),Object(O.jsx)(d.b,{path:"*",component:W})]})}}]),a}(n.Component),re=ne,se=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(O.jsx)(re,{})}}]),a}(r.a.Component),ie=se;a(42);i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(m.a,{children:Object(O.jsx)(ie,{})})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.9de72f0f.chunk.js.map